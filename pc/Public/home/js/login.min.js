"use strict";function getBackLogo(){var i=config.host_path+"/Home/Login/getupdateLogo";$.ajax({url:i,type:"get",success:function(i){$(".container-login").css({"background-image":"url("+i.data[0].background_url+")"})}})}function toggleFu(i,n,t,o){var e=$(i);e.click(function(){$(t).animate({opacity:0},function(){$(this).css("display","none")}),$(o).animate({opacity:1},function(){$(this).css("display","block")})});var e=$(n);e.click(function(){$(o).animate({opacity:0},function(){$(this).css("display","none")}),$(t).animate({opacity:1},function(){$(this).css("display","block")})})}var loginVm=new Vue({el:"#index-box",data:{reminder:"",status:0,nonce_str:nonceStr(32),companyName:"",companyPhone:"",companyEmail:"",serviceTime:"",questionList:[],time:""},created:function(){this.getQuestion(),this.basics(),document.onkeydown=function(){window.event.keyCode}},methods:{basics:function(){var i=config.host_path+"/Home/Login/getBasics",n=this;$.get(i,function(i){n.companyName=i.name}),$.get(config.host_path+"/Home/Login/getContactUs",function(i){n.companyPhone=i.company_tel,n.companyEmail=i.company_email,n.serviceTime=i.service_time}),this.isErrToken()},isErrToken:function(){var i=this,n=window.location.href,t=$.trim(n.split("/token_err/")[1]);1!=t&&"true"!=t||i.disErr("Invalid")},resetPass:function(i){var n="pc"==i?$("[name=pc-forget-email]").val():$("[name=mobile-forget-email]").val(),t=nonceStr(),o=config.verify_str+n+t,e=this;if(""==n)return void e.disErr(1);if(!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(n))return void e.disErr(2);var s=config.host_path+"/Home/Login/reset",a={email:n,nonce_str:t,sign:hex_md5(o)};$(".forgetBtn").text("傳送中..."),$(".forgetBtn").attr("disabled","true");var r;clearTimeout(r),r=setTimeout(function(){$(".nav-hd").css({transition:"height 0.5s",height:"0px"})},6e3),$.post(s,a,function(i){$(".forgetBtn").text("重置密碼"),$(".forgetBtn").removeAttr("disabled"),$(".tea_login_error").css({display:"block !important"}),e.disErr(8)})},BTCLogin:function(){var i=$("#emailName").val(),n=hex_md5(config.verify_str+$("#password").val());if(this.verification($("#emailName").val(),$("#password").val())){var t={email:i,password:n,nonce_str:this.nonce_str,sign:hex_md5(config.verify_str+i+this.nonce_str+n)};this.loginConst(t)}},register:function(){var i=$("[name=rename]").val();return""==i?void $(".sh-hint").css({display:"block"}):/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(i)?($(".sh-hint").css({display:"none"}),void this.registerConst(i)):void $(".sh-hint").css({display:"block"})},PhoneLogin:function(){if(this.verification($("[name=emailPhone]").val(),$("[name=passPhome]").val())){var i=$("[name=emailPhone]").val(),n=hex_md5(config.verify_str+$("[name=passPhome]").val()),t={email:i,password:n,nonce_str:this.nonce_str,sign:hex_md5(config.verify_str+i+this.nonce_str+n)};this.loginConst(t)}},PhoneRegister:function(){var i=$("[name=username]").val();return""==i?void $(".sh-small-hint").css({display:"block"}):/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(i)?($(".sh-small-hint").css({display:"none"}),void this.registerConst(i)):void $(".sh-small-hint").css({display:"block"})},verification:function(i,n){var t;return clearTimeout(t),t=setTimeout(function(){$(".nav-hd").css({transition:"height 0.5s",height:"0px"})},6e3),""==i?(this.disErr(1),!1):""==n?(this.disErr(1),!1):!!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(i)||(this.disErr(2),!1)},disErr:function(i){$(".nav-hd").css({transition:"height 0.5s",height:"40px"}),this.status=i},loginConst:function(i){var n=this,t=config.host_path+"/Home/Login/login",o=$(".xy-login-login").html();sg.loading($(".xy-login-login")),$.post(t,i,{emulateJOSN:!0}).then(function(i){return sg.hideLoading($(".xy-login-login"),o),0==parseInt(i.code)?(n.disErr(3),void setTimeout(function(){sg.jump(config.host_path)},1e3)):void n.disErr(9)},function(i){console.log(i),sg.hideLoading($(".xy-login-login"),o),n.disErr(7)})},registerConst:function(i){var n=this,t=config.host_path+"/Home/Login/register",o=nonceStr(),e=config.verify_str+i+o,s={email:i,nonce_str:o,sign:hex_md5(e)},a=$(".xy-login-register").html();sg.loading($(".xy-login-register")),$.post(t,s,{emulateJOSN:!0}).then(function(t){if(sg.hideLoading($(".xy-login-register"),a),0==parseInt(t.code)){var o=config.host_path+"/Home/Email/send?email="+i;return window.location.href=o,!0}return 1001==parseInt(t.code)?(n.disErr(5),!1):(n.disErr(6),!1)},function(i){sg.hideLoading($(".xy-login-register"),a),n.disErr(7)})},goQuestionContent:function(i){window.location.href=config.host_path+"/Home/Question/FAQ.html?type="+i},getQuestion:function(){var i=this,n=config.host_path+"/Home/Question/getCommonProblemFive";$.get(n,function(n){i.questionList=n.data})},goQuestionMore:function(){window.location.href=config.host_path+"/Home/Question/index.html"}}});$(document).ready(function(){var i=$("#sh_tab ul li");i.on("click",function(){$(this).addClass("selected").siblings().removeClass("selected");var n=i.index(this);$("div.tab_box > div").eq(n).show().siblings().hide(),1==n&&$(".sh-hint").css({display:"none"})})}),getBackLogo(),$(document).ready(function(){toggleFu("#login-re","#login-btn",".login-small-input",".re-small"),toggleFu(".forget",".gologin",".tea_login_error",".forget-pwd"),toggleFu(".forget-small",".gologinsmall",".login-small-input",".forget-pwd-small")});